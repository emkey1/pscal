# Pscal

Pscal implements a significant subset of classic Pascal.  The code base is written in C and consists of a hand‑written lexer and parser, a bytecode compiler and a stack‑based virtual machine.  Object‑oriented extensions are intentionally avoided.

The project was primarily created using AI programming tools; design guidance and debugging were human‑directed while most of the code was generated by various AI assistants.

Optional SDL2 support adds graphics and audio capabilities, and built‑in networking routines use libcurl.

## Requirements

- C compiler with C11 support
- [CMake](https://cmake.org/) 3.24 or newer
- [libcurl](https://curl.se/libcurl/)
- **Optional**: SDL2, SDL2_image, SDL2_mixer and SDL2_ttf when building with `-DSDL=ON`

On Debian/Ubuntu the required packages can be installed with:

```sh
sudo apt-get update
sudo apt-get install build-essential cmake libcurl4-openssl-dev \
    libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev libsdl2-ttf-dev
```

## Building

```sh
git clone <repository>
cd pscal
mkdir build && cd build
cmake ..            # add -DSDL=ON to enable SDL support
make
```

Binaries are written to `build/bin` (e.g. `pscal` and `dscal`).

To build without SDL explicitly:

```sh
cmake -DSDL=OFF ..
```

## Tests

After building, run the regression suite:

```sh
ctest --output-on-failure
```

This executes `Tests/run_tests.sh` and exercises both positive and expected failure cases.

## Runtime library

The interpreter expects access to the `etc` and `lib` directories.  When running from the repository you can create temporary symlinks:

```sh
REPO_DIR="$(pwd)"
sudo mkdir -p /usr/local/Pscal
sudo ln -s "${REPO_DIR}/etc" /usr/local/Pscal/etc
sudo ln -s "${REPO_DIR}/lib" /usr/local/Pscal/lib
```

Alternatively, set the `PSCAL_LIB_DIR` environment variable to point at a copy of the `lib` directory.

## License

Pscal is released into the public domain under [The Unlicense](LICENSE).

