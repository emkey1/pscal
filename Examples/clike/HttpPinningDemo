#!/usr/bin/env clike

int main() {
  if (getenvint("RUN_NET_TESTS", 0) != 1) {
    printf("Set RUN_NET_TESTS=1 to run this demo.\n");
    return 0;
  }
  int s = httpsession();
  httpsetoption(s, "tls_min", 12);
  httpsetoption(s, "alpn", 1);
  httpsetoption(s, "pin_sha256", "");
  mstream out = mstreamcreate();
  int code = httprequest(s, "GET", "https://example.com", NULL, out);
  printf("Status: %d\nErrCode: %d\nErrMsg: %s\n", code, httperrorcode(s), httplasterror(s));
  mstreamfree(&out);
  httpclose(s);
  return 0;
}

