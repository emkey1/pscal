#!/usr/bin/env rea
// Rea SDL demo (requires building with -DSDL=ON)
// InitGraph3D(widthPixels, heightPixels, title, depthBits, stencilBits) creates
// an SDL window backed by an OpenGL context. GLSwapWindow presents the frame
// while GLSetSwapInterval toggles vsync.

int main() {
  bool vsyncOn = true;

  InitGraph3D(640, 480, "Rea SDL swap demo", 24, 8);
  GLSetSwapInterval(1);

  for (int frame = 0; frame < 600; frame = frame + 1) {
    if (frame > 0 && frame % 120 == 0) {
      vsyncOn = !vsyncOn;
      if (vsyncOn) {
        GLSetSwapInterval(1);
      } else {
        GLSetSwapInterval(0);
      }
    }

    // Submit OpenGL draw calls here before swapping.
    GLSwapWindow();
    GraphLoop(1);
  }

  CloseGraph3D();
  return 0;
}

